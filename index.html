<html>
<head>
<style>
/* Tuvalin boyutunu ve konumunu ayarlıyoruz */
canvas {
  width: 800px;
  height: 600px;
  margin: auto;
  border: 1px solid black;
}
</style>
</head>
<body>
<!-- Tuval elementini oluşturuyoruz -->
<canvas id="oyun"></canvas>
<script>
// Tuval elementini seçiyoruz
var canvas = document.getElementById("oyun");
// Tuval üzerinde çizim yapmak için bir bağlam (context) oluşturuyoruz
var ctx = canvas.getContext("2d");
// Araba nesnesini oluşturuyoruz
var araba = {
  x: 400, // Arabanın x koordinatı
  y: 500, // Arabanın y koordinatı
  w: 50, // Arabanın genişliği
  h: 100, // Arabanın yüksekliği
  renk: "red", // Arabanın rengi
  hiz: 5 // Arabanın hızı
};
// Yol nesnesini oluşturuyoruz
var yol = {
  x: 200, // Yolun x koordinatı
  y: -600, // Yolun y koordinatı
  w: 400, // Yolun genişliği
  h: 1200 // Yolun yüksekliği
};
// Engeller dizisini oluşturuyoruz
var engeller = [];
// Engelleri rastgele oluşturan bir fonksiyon yazıyoruz
function engelOlustur() {
  // Engelin x koordinatını rastgele belirliyoruz
  var x = Math.floor(Math.random() * (yol.w - 50)) + yol.x;
  // Engelin y koordinatını rastgele belirliyoruz
  var y = Math.floor(Math.random() * -600) - 100;
  // Engelin genişliğini ve yüksekliğini sabit belirliyoruz
  var w = 50;
  var h = 100;
  // Engelin rengini rastgele belirliyoruz
  var renkler = ["blue", "green", "yellow", "orange", "purple"];
  var renk = renkler[Math.floor(Math.random() * renkler.length)];
  // Engelin hızını rastgele belirliyoruz
  var hiz = Math.floor(Math.random() * 5) + araba.hiz;
    // Engeli bir nesne olarak oluşturuyoruz
  var engel = {
    x: x,
    y: y,
    w: w,
    h: h,
    renk: renk,
    hiz: hiz
  };
  // Engeli engeller dizisine ekliyoruz
  engeller.push(engel);
}
// Oyunu başlatan bir fonksiyon yazıyoruz
function oyunBaslat() {
  // Oyunu güncelleyen ve çizen bir fonksiyon yazıyoruz
  function oyunGuncelle() {
    // Tuvali temizliyoruz
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    // Yolu çiziyoruz
    ctx.fillStyle = "gray";
    ctx.fillRect(yol.x, yol.y, yol.w, yol.h);
    // Yolun y koordinatını arttırıyoruz
    yol.y += araba.hiz;
    // Yolun y koordinatı tuvalin altına çıkarsa, y koordinatını sıfırlıyoruz
    if (yol.y > canvas.height) {
      yol.y = -600;
    }
    // Arabayı çiziyoruz
    ctx.fillStyle = araba.renk;
    ctx.fillRect(araba.x, araba.y, araba.w, araba.h);
    // Arabanın x koordinatını klavye tuşlarına göre değiştiriyoruz
    document.onkeydown = function(e) {
      if (e.keyCode == 37) { // Sol ok tuşu
        araba.x -= araba.hiz;
      }
      if (e.keyCode == 39) { // Sağ ok tuşu
        araba.x += araba.hiz;
      }
    };
    // Arabanın x koordinatını yol sınırları içinde tutuyoruz
    if (araba.x < yol.x) {
      araba.x = yol.x;
    }
    if (araba.x > yol.x + yol.w - araba.w) {
      araba.x = yol.x + yol.w - araba.w;
    }
        // Engelleri çiziyoruz
    for (var i = 0; i < engeller.length; i++) {
      var engel = engeller[i];
      ctx.fillStyle = engel.renk;
      ctx.fillRect(engel.x, engel.y, engel.w, engel.h);
      // Engelin y koordinatını arttırıyoruz
      engel.y += engel.hiz;
      // Engelin y koordinatı tuvalin altına çıkarsa, engeli engeller dizisinden çıkarıyoruz
      if (engel.y > canvas.height) {
        engeller.splice(i, 1);
      }
      // Araba ile engel arasında çarpışma olup olmadığını kontrol ediyoruz
      if (araba.x < engel.x + engel.w &&
          araba.x + araba.w > engel.x &&
          araba.y < engel.y + engel.h &&
          araba.y + araba.h > engel.y) {
        // Çarpışma varsa, oyunu durduruyoruz
        clearInterval(oyun);
        // Oyun bitti mesajı veriyoruz
        alert("Oyun bitti!");
      }
    }
    // Her 100 karede bir yeni bir engel oluşturuyoruz
    if (frame % 100 == 0) {
      engelOlustur();
    }
    // Kare sayısını arttırıyoruz
    frame++;
  }
  // Kare sayısını sıfırlıyoruz
  var frame = 0;
  // Oyunu güncelleme fonksiyonunu belirli aralıklarla çağırıyoruz
  var oyun = setInterval(oyunGuncelle, 20);
}
// Oyunu başlatma fonksiyonunu çağırıyoruz
oyunBaslat();
</script>
</body>
</html>
